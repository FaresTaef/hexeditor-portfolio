#include <iostream>
#include "FileLoader.h"
#include "Formatter.h"
#include "Editor.h"
#include "Display.h"
#include "SaveHandler.h"

int main(int argc, char* argv[]) {
    std::string filePath;

    if (argc > 1) {
        filePath = argv[1];
    } else {
        std::cout << "Enter path to binary file: ";
        std::cin >> filePath;
    }

    FileLoader loader(filePath);
    if (!loader.load()) {
        std::cerr << "Failed to load file." << std::endl;
        return 1;
    }

    std::vector<unsigned char>& data = loader.getData();
    Formatter formatter;
    Display display;
    Editor editor;
    SaveHandler saver;

    bool running = true;
    while (running) {
        display.printFormattedData(data, formatter);
        running = editor.promptEdit(data);
    }

    saver.promptSave(data, filePath);
    return 0;
}
